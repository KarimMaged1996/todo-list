(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var o=n.getElementsByTagName("script");o.length&&(t=o[o.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();class t{constructor(e){this.name=e,this.todo=[]}addTodo(e){this.todo.push(e)}deleteTodo(e){for(let t of this.todo)t.title===e&&this.todo.splice(this.todo.indexOf(t),1)}completeTodo(e){for(let t of this.todo)t.title===e&&t.complete()}todoNames(){let e=[];for(let t of this.todo)e.push(t.title);return e}}class n{constructor(e,t,n,o="",d=!1){this.title=e,this.dueDate=t,this.priority=n,this.discription=o,this.isComplete=d}changeTitle(e){this.title=e}changeDate(e){this.dueDate=e}changePrioirity(e){this.priority=e}changeDiscription(e){this.discription=e}complete(){this.isComplete=!0}}const o=e.p+"ab1ee08131218da1d3b2.svg";function d(e,t){return e.find((e=>e.name===t))}const r=e.p+"2bb171d11d6384c18dfd.svg";function l(e){let t=document.createElement("h1");t.textContent=e.name;let n=document.createElement("div");n.classList.add("addNewTodo");let o=new Image;o.src=r;let d=document.createElement("div");return d.textContent="Add a todo",n.append(o,d),[t,...function(){let t=[];return e.todo.length>0&&e.todo.forEach((e=>{let n=document.createElement("div");n.classList.add("single-todo"),!0===e.isComplete&&n.classList.add("green");let o=document.createElement("button");o.textContent="X",o.classList.add("todoDelete");let d=document.createElement("div"),r=document.createElement("div");r.textContent="Title:";let l=document.createElement("div");l.textContent=e.title,d.append(r,l),d.classList.add("todoTitle");let c=document.createElement("div"),i=document.createElement("div");i.textContent="Due Date:";let a=document.createElement("div");a.textContent=e.dueDate,c.append(i,a),c.classList.add("todoDate");let s=document.createElement("div"),m=document.createElement("div");m.textContent="Priority:";let u=document.createElement("div");u.textContent=e.priority,s.append(m,u),s.classList.add("todoPriority");let p=document.createElement("button");if(p.textContent="completed",p.classList.add("todoCompleted"),""!==e.discription){let t=document.createElement("div"),r=document.createElement("div");r.textContent="Discription:";let l=document.createElement("div");l.textContent=e.discription,t.append(r,l),t.classList.add("todoDiscription"),n.append(o,d,c,s,t,p)}else n.append(o,d,c,s,p);t.push(n)})),t}(),n]}function c(e){sessionStorage.setItem("testStorage",JSON.stringify(e))}const i=[];let a=document.querySelector("#projects");if(sessionStorage.length>1){let e=JSON.parse(sessionStorage.getItem("testStorage"));for(let n of e)i.push(new t(n.name));for(let t=0;t<i.length;t++)for(let o=0;o<e[t].todo.length;o++)i[t].addTodo(new n(e[t].todo[o].title,e[t].todo[o].dueDate,e[t].todo[o].priority,e[t].todo[o].discription,e[t].todo[o].isComplete));let d=document.querySelector("#newProj");d.remove(),i.forEach((e=>{let t=document.createElement("div");t.classList.add("new-project");let n=new Image;n.src=o;let d=document.createElement("div");d.textContent=e.name,t.append(n,d),a.append(t)})),a.append(d)}document.querySelector("#newProj").addEventListener("click",(()=>{let e=function(){let e=document.querySelector("#newProj"),t=document.querySelector("#projects");e.remove();let n=function(){let e=document.createElement("div");e.classList.add("tempForm");let t=document.createElement("input");t.setAttribute("type","text");let n=document.createElement("button");n.textContent="Add";let o=document.createElement("button");return o.textContent="Cancel",e.append(t,n,o),e}();return t.append(n),[e,n]}(),n=e[1].children;n[1].addEventListener("click",(()=>{if(""!==n[0].value&&void 0===d(i,n[0].value)){let d=document.createElement("div");d.classList.add("new-project");let r=new Image;r.src=o;let l=document.createElement("div");l.textContent=n[0].value,d.append(r,l),a.append(d,e[0]),e[1].remove(),i.push(new t(n[0].value)),c(i)}else void 0!==d(i,n[0].value)?(n[0].style.border="solid 0.25vh red",n[0].value="",n[0].setAttribute("placeholder","Duplicate project name")):(n[0].style.border="solid 0.25vh red",n[0].setAttribute("placeholder","project must have a name"))})),n[2].addEventListener("click",(()=>{a.append(e[0]),e[1].remove()}))})),document.addEventListener("click",(e=>{if("new-project"===e.target.getAttribute("class")||"new-project"===e.target.parentElement.getAttribute("class")){let t;t=e.target.children.length>0?e.target.children[1].textContent:e.target.parentElement.children[1].textContent;let n=d(i,t),o=document.querySelector(".todos"),r=Array.from(o.children),c=l(n);r.forEach((e=>{e.remove()})),o.append(...c)}})),function(){let e=function(){let e=document.createElement("div");e.classList.add("todo-input");let t=document.createElement("div"),n=document.createElement("div");n.textContent="Task Name";let o=document.createElement("input");o.setAttribute("type","text"),t.append(n,o);let d=document.createElement("div"),r=document.createElement("div");r.textContent="Due Date";let l=document.createElement("input");l.setAttribute("type","date"),d.append(r,l);let c=document.createElement("div"),i=document.createElement("div");i.textContent="Priority";let a=document.createElement("select"),s=document.createElement("option");s.textContent="Low";let m=document.createElement("option");m.textContent="Medium";let u=document.createElement("option");u.textContent="High",a.append(s,m,u),c.append(i,a);let p=document.createElement("div"),h=document.createElement("div");h.textContent="Discription";let v=document.createElement("input");v.setAttribute("type","textArea"),p.append(h,v);let E=document.createElement("div"),g=document.createElement("button");g.classList.add("addTodoBtn"),g.textContent="Add";let f=document.createElement("button");return f.classList.add("cancelTodoBtn"),f.textContent="Cancel",E.append(g,f),e.append(t,d,c,p,E),e}(),t=e.children[0].children[1],o=e.children[1].children[1],r=e.children[2].children[1],a=e.children[3].children[1];document.addEventListener("click",(t=>{"addNewTodo"!==t.target.getAttribute("class")&&"addNewTodo"!==t.target.parentElement.getAttribute("class")||(document.body.append(e),document.querySelector(".addNewTodo").style.visibility="hidden")})),document.addEventListener("click",(t=>{"cancelTodoBtn"===t.target.getAttribute("class")&&(e.remove(),document.querySelector(".addNewTodo").style.visibility="visible")})),document.addEventListener("click",(s=>{if("addTodoBtn"===s.target.getAttribute("class")){let s=document.querySelector(".todos").children[0].textContent,m=d(i,s).todoNames();if(""===t.value)t.style.border="solid 0.25vh red",t.setAttribute("placeholder","this input is required");else if(m.includes(t.value))t.style.border="solid 0.25vh red",t.value="",t.setAttribute("placeholder","Duplicate Name");else if(""===o.value)o.style.border="solid 0.25vh red";else{let s=document.querySelector(".todos"),m=s.children[0].textContent,u=d(i,m);u.addTodo(new n(t.value,o.value,r.value,a.value)),c(i),Array.from(s.children).forEach((e=>{e.remove()}));let p=l(u);s.append(...p),e.remove()}}}))}(),document.addEventListener("click",(e=>{if("todoCompleted"===e.target.getAttribute("class")){e.target.parentElement.classList.add("green");let t=e.target.parentElement.children[1].children[1].textContent,n=e.target.parentElement.parentElement.children[0].textContent;d(i,n).completeTodo(t),c(i)}})),document.addEventListener("click",(e=>{if("todoDelete"===e.target.getAttribute("class")){let t=e.target.parentElement.children[1].children[1].textContent,n=e.target.parentElement.parentElement.children[0].textContent;d(i,n).deleteTodo(t),c(i),e.target.parentElement.remove()}}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQ0EsSUFBSUEsRUFBc0IsQ0FBQyxFQ0QzQkEsRUFBb0JDLEVBQUksV0FDdkIsR0FBMEIsaUJBQWZDLFdBQXlCLE9BQU9BLFdBQzNDLElBQ0MsT0FBT0MsTUFBUSxJQUFJQyxTQUFTLGNBQWIsRUFHaEIsQ0FGRSxNQUFPQyxHQUNSLEdBQXNCLGlCQUFYQyxPQUFxQixPQUFPQSxNQUN4QyxDQUNBLENBUHVCLEcsTUNBeEIsSUFBSUMsRUFDQVAsRUFBb0JDLEVBQUVPLGdCQUFlRCxFQUFZUCxFQUFvQkMsRUFBRVEsU0FBVyxJQUN0RixJQUFJQyxFQUFXVixFQUFvQkMsRUFBRVMsU0FDckMsSUFBS0gsR0FBYUcsSUFDYkEsRUFBU0MsZ0JBQ1pKLEVBQVlHLEVBQVNDLGNBQWNDLE1BQy9CTCxHQUFXLENBQ2YsSUFBSU0sRUFBVUgsRUFBU0kscUJBQXFCLFVBQ3pDRCxFQUFRRSxTQUFRUixFQUFZTSxFQUFRQSxFQUFRRSxPQUFTLEdBQUdILElBQzVELENBSUQsSUFBS0wsRUFBVyxNQUFNLElBQUlTLE1BQU0seURBQ2hDVCxFQUFZQSxFQUFVVSxRQUFRLE9BQVEsSUFBSUEsUUFBUSxRQUFTLElBQUlBLFFBQVEsWUFBYSxLQUNwRmpCLEVBQW9Ca0IsRUFBSVgsQyxLQ2ZULE1BQU1ZLEVBQ25CQyxZQUFZQyxHQUNWbEIsS0FBS2tCLEtBQU9BLEVBQ1psQixLQUFLbUIsS0FBTyxFQUNkLENBRUFDLFFBQVFDLEdBQ05yQixLQUFLbUIsS0FBS0csS0FBS0QsRUFDakIsQ0FFQUUsV0FBV0MsR0FDVCxJQUFLLElBQUlDLEtBQVF6QixLQUFLbUIsS0FDaEJNLEVBQUtELFFBQVVBLEdBQ2pCeEIsS0FBS21CLEtBQUtPLE9BQU8xQixLQUFLbUIsS0FBS1EsUUFBUUYsR0FBTyxFQUdoRCxDQUNBRyxhQUFhVixHQUNYLElBQUssSUFBSU8sS0FBUXpCLEtBQUttQixLQUNoQk0sRUFBS0QsUUFBVU4sR0FDakJPLEVBQUtJLFVBR1gsQ0FDQUMsWUFDRSxJQUFJQyxFQUFRLEdBQ1osSUFBSyxJQUFJTixLQUFRekIsS0FBS21CLEtBQ3BCWSxFQUFNVCxLQUFLRyxFQUFLRCxPQUVsQixPQUFPTyxDQUNULEVDOUJhLE1BQU1DLEVBQ25CZixZQUFZTyxFQUFPUyxFQUFTQyxFQUFVQyxFQUFjLEdBQUlDLEdBQWEsR0FDbkVwQyxLQUFLd0IsTUFBUUEsRUFDYnhCLEtBQUtpQyxRQUFVQSxFQUNmakMsS0FBS2tDLFNBQVdBLEVBQ2hCbEMsS0FBS21DLFlBQWNBLEVBQ25CbkMsS0FBS29DLFdBQWFBLENBQ3BCLENBRUFDLFlBQVlDLEdBQ1Z0QyxLQUFLd0IsTUFBUWMsQ0FDZixDQUVBQyxXQUFXQyxHQUNUeEMsS0FBS2lDLFFBQVVPLENBQ2pCLENBRUFDLGdCQUFnQkMsR0FDZDFDLEtBQUtrQyxTQUFXUSxDQUNsQixDQUVBQyxrQkFBa0JDLEdBQ2hCNUMsS0FBS21DLFlBQWNTLENBQ3JCLENBRUFmLFdBQ0U3QixLQUFLb0MsWUFBYSxDQUNwQixFLHVDQzNCYSxTQUFTUyxFQUFTQyxFQUFLNUIsR0FDcEMsT0FBTzRCLEVBQUlDLE1BQU1DLEdBQ1JBLEVBQVE5QixPQUFTQSxHQUU1QixDLHVDQ0RlLFNBQVMrQixFQUFnQkQsR0FDdEMsSUFBSUUsRUFBUzNDLFNBQVM0QyxjQUFjLE1BQ3BDRCxFQUFPRSxZQUFjSixFQUFROUIsS0F5RDdCLElBQUlHLEVBQVVkLFNBQVM0QyxjQUFjLE9BQ3JDOUIsRUFBUWdDLFVBQVVDLElBQUksY0FDdEIsSUFBSUMsRUFBTyxJQUFJQyxNQUNmRCxFQUFLOUMsSUFBTSxFQUNYLElBQUlnRCxFQUFVbEQsU0FBUzRDLGNBQWMsT0FJckMsT0FIQU0sRUFBUUwsWUFBYyxhQUN0Qi9CLEVBQVFxQyxPQUFPSCxFQUFNRSxHQUVkLENBQUNQLEtBOURSLFdBQ0UsSUFBSVMsRUFBUSxHQWtEWixPQWpESVgsRUFBUTdCLEtBQUtQLE9BQVMsR0FDeEJvQyxFQUFRN0IsS0FBS3lDLFNBQVNuQyxJQUNwQixJQUFJb0MsRUFBTXRELFNBQVM0QyxjQUFjLE9BQ2pDVSxFQUFJUixVQUFVQyxJQUFJLGdCQUNNLElBQXBCN0IsRUFBS1csWUFDUHlCLEVBQUlSLFVBQVVDLElBQUksU0FFcEIsSUFBSVEsRUFBWXZELFNBQVM0QyxjQUFjLFVBQ3ZDVyxFQUFVVixZQUFjLElBQ3hCVSxFQUFVVCxVQUFVQyxJQUFJLGNBQ3hCLElBQUk5QixFQUFRakIsU0FBUzRDLGNBQWMsT0FDL0JqQyxFQUFPWCxTQUFTNEMsY0FBYyxPQUNsQ2pDLEVBQUtrQyxZQUFjLFNBQ25CLElBQUlXLEVBQVd4RCxTQUFTNEMsY0FBYyxPQUN0Q1ksRUFBU1gsWUFBYzNCLEVBQUtELE1BQzVCQSxFQUFNa0MsT0FBT3hDLEVBQU02QyxHQUNuQnZDLEVBQU02QixVQUFVQyxJQUFJLGFBQ3BCLElBQUlkLEVBQU9qQyxTQUFTNEMsY0FBYyxPQUM5QmEsRUFBV3pELFNBQVM0QyxjQUFjLE9BQ3RDYSxFQUFTWixZQUFjLFlBQ3ZCLElBQUlhLEVBQVcxRCxTQUFTNEMsY0FBYyxPQUN0Q2MsRUFBU2IsWUFBYzNCLEVBQUtRLFFBQzVCTyxFQUFLa0IsT0FBT00sRUFBVUMsR0FDdEJ6QixFQUFLYSxVQUFVQyxJQUFJLFlBQ25CLElBQUlwQixFQUFXM0IsU0FBUzRDLGNBQWMsT0FDbENlLEVBQWUzRCxTQUFTNEMsY0FBYyxPQUMxQ2UsRUFBYWQsWUFBYyxZQUMzQixJQUFJZSxFQUFlNUQsU0FBUzRDLGNBQWMsT0FDMUNnQixFQUFhZixZQUFjM0IsRUFBS1MsU0FDaENBLEVBQVN3QixPQUFPUSxFQUFjQyxHQUM5QmpDLEVBQVNtQixVQUFVQyxJQUFJLGdCQUN2QixJQUFJYyxFQUFZN0QsU0FBUzRDLGNBQWMsVUFHdkMsR0FGQWlCLEVBQVVoQixZQUFjLFlBQ3hCZ0IsRUFBVWYsVUFBVUMsSUFBSSxpQkFDQyxLQUFyQjdCLEVBQUtVLFlBQW9CLENBQzNCLElBQUlBLEVBQWM1QixTQUFTNEMsY0FBYyxPQUNyQ2tCLEVBQWtCOUQsU0FBUzRDLGNBQWMsT0FDN0NrQixFQUFnQmpCLFlBQWMsZUFDOUIsSUFBSWtCLEVBQWtCL0QsU0FBUzRDLGNBQWMsT0FDN0NtQixFQUFnQmxCLFlBQWMzQixFQUFLVSxZQUNuQ0EsRUFBWXVCLE9BQU9XLEVBQWlCQyxHQUNwQ25DLEVBQVlrQixVQUFVQyxJQUFJLG1CQUMxQk8sRUFBSUgsT0FBT0ksRUFBV3RDLEVBQU9nQixFQUFNTixFQUFVQyxFQUFhaUMsRUFDNUQsTUFDRVAsRUFBSUgsT0FBT0ksRUFBV3RDLEVBQU9nQixFQUFNTixFQUFVa0MsR0FFL0NULEVBQU1yQyxLQUFLdUMsRUFBSSxJQUdaRixDQUNULENBVW1CWSxHQUFXbEQsRUFDaEMsQ0N2RWUsU0FBU21ELEVBQXFCMUIsR0FDM0MyQixlQUFlQyxRQUFRLGNBQWVDLEtBQUtDLFVBQVU5QixHQUN2RCxDQ1FBLE1BQU0rQixFQUFrQixHQUN4QixJQUFJQyxFQUFXdkUsU0FBU3dFLGNBQWMsYUFFdEMsR0FBSU4sZUFBZTdELE9BQVMsRUFBRyxDQUM3QixJQUFJb0UsRUFBYUwsS0FBS00sTUFBTVIsZUFBZVMsUUFBUSxnQkFDbkQsSUFBSyxJQUFJekQsS0FBUXVELEVBQ2ZILEVBQWdCdkQsS0FBSyxJQUFJTixFQUFRUyxFQUFLUCxPQUd4QyxJQUFLLElBQUlpRSxFQUFJLEVBQUdBLEVBQUlOLEVBQWdCakUsT0FBUXVFLElBQzFDLElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJSixFQUFXRyxHQUFHaEUsS0FBS1AsT0FBUXdFLElBQzdDUCxFQUFnQk0sR0FBRy9ELFFBQ2pCLElBQUlZLEVBQ0ZnRCxFQUFXRyxHQUFHaEUsS0FBS2lFLEdBQUc1RCxNQUN0QndELEVBQVdHLEdBQUdoRSxLQUFLaUUsR0FBR25ELFFBQ3RCK0MsRUFBV0csR0FBR2hFLEtBQUtpRSxHQUFHbEQsU0FDdEI4QyxFQUFXRyxHQUFHaEUsS0FBS2lFLEdBQUdqRCxZQUN0QjZDLEVBQVdHLEdBQUdoRSxLQUFLaUUsR0FBR2hELGFBTTlCLElBQUl5QixFQUFNdEQsU0FBU3dFLGNBQWMsWUFDakNsQixFQUFJd0IsU0FDSlIsRUFBZ0JqQixTQUFTMEIsSUFDdkIsSUFBSUMsRUFBVWhGLFNBQVM0QyxjQUFjLE9BQ3JDb0MsRUFBUWxDLFVBQVVDLElBQUksZUFDdEIsSUFBSUMsRUFBTyxJQUFJQyxNQUNmRCxFQUFLOUMsSUFBTSxFQUNYLElBQUlnRCxFQUFVbEQsU0FBUzRDLGNBQWMsT0FDckNNLEVBQVFMLFlBQWNrQyxFQUFLcEUsS0FDM0JxRSxFQUFRN0IsT0FBT0gsRUFBTUUsR0FDckJxQixFQUFTcEIsT0FBTzZCLEVBQVEsSUFFMUJULEVBQVNwQixPQUFPRyxFQUNsQixDQU9FdEQsU0FBU3dFLGNBQWMsWUFBWVMsaUJBQWlCLFNBQVMsS0FDM0QsSUFBSUMsRUNuQ0QsV0FDTCxJQUFJQyxFQUFVbkYsU0FBU3dFLGNBQWMsWUFDakNELEVBQVd2RSxTQUFTd0UsY0FBYyxhQUN0Q1csRUFBUUwsU0FDUixJQUFJSSxFQWpCQyxXQUNMLElBQUk1QixFQUFNdEQsU0FBUzRDLGNBQWMsT0FDakNVLEVBQUlSLFVBQVVDLElBQUksWUFDbEIsSUFBSXFDLEVBQVFwRixTQUFTNEMsY0FBYyxTQUNuQ3dDLEVBQU1DLGFBQWEsT0FBUSxRQUMzQixJQUFJQyxFQUFVdEYsU0FBUzRDLGNBQWMsVUFDckMwQyxFQUFRekMsWUFBYyxNQUN0QixJQUFJMEMsRUFBVXZGLFNBQVM0QyxjQUFjLFVBR3JDLE9BRkEyQyxFQUFRMUMsWUFBYyxTQUN0QlMsRUFBSUgsT0FBT2lDLEVBQU9FLEVBQVNDLEdBQ3BCakMsQ0FDVCxDQU1nQmtDLEdBRWQsT0FEQWpCLEVBQVNwQixPQUFPK0IsR0FDVCxDQUFDQyxFQUFTRCxFQUNuQixDRDRCa0JPLEdBQ1ZDLEVBQVdSLEVBQVEsR0FBR1MsU0FRMUJELEVBQVMsR0FBR1QsaUJBQWlCLFNBQVMsS0FDcEMsR0FDd0IsS0FBdEJTLEVBQVMsR0FBR0UsWUFDcUNDLElBQWpEdkQsRUFBU2dDLEVBQWlCb0IsRUFBUyxHQUFHRSxPQUN0QyxDQUNBLElBQUlaLEVBQVVoRixTQUFTNEMsY0FBYyxPQUNyQ29DLEVBQVFsQyxVQUFVQyxJQUFJLGVBQ3RCLElBQUlDLEVBQU8sSUFBSUMsTUFDZkQsRUFBSzlDLElBQU0sRUFDWCxJQUFJZ0QsRUFBVWxELFNBQVM0QyxjQUFjLE9BQ3JDTSxFQUFRTCxZQUFjNkMsRUFBUyxHQUFHRSxNQUNsQ1osRUFBUTdCLE9BQU9ILEVBQU1FLEdBQ3JCcUIsRUFBU3BCLE9BQU82QixFQUFTRSxFQUFRLElBQ2pDQSxFQUFRLEdBQUdKLFNBQ1hSLEVBQWdCdkQsS0FBSyxJQUFJTixFQUFRaUYsRUFBUyxHQUFHRSxRQUM3QzNCLEVBQXFCSyxFQUN2QixXQUE0RHVCLElBQWpEdkQsRUFBU2dDLEVBQWlCb0IsRUFBUyxHQUFHRSxRQUMvQ0YsRUFBUyxHQUFHSSxNQUFNQyxPQUFTLG1CQUMzQkwsRUFBUyxHQUFHRSxNQUFRLEdBQ3BCRixFQUFTLEdBQUdMLGFBQWEsY0FBZSw0QkFFeENLLEVBQVMsR0FBR0ksTUFBTUMsT0FBUyxtQkFDM0JMLEVBQVMsR0FBR0wsYUFBYSxjQUFlLDRCQUMxQyxJQUtGSyxFQUFTLEdBQUdULGlCQUFpQixTQUFTLEtBQ3BDVixFQUFTcEIsT0FBTytCLEVBQVEsSUFDeEJBLEVBQVEsR0FBR0osUUFBUSxHQUNuQixJQUtOOUUsU0FBU2lGLGlCQUFpQixTQUFVdEYsSUFFbEMsR0FDcUMsZ0JBQW5DQSxFQUFFcUcsT0FBT0MsYUFBYSxVQUMyQixnQkFBakR0RyxFQUFFcUcsT0FBT0UsY0FBY0QsYUFBYSxTQUNwQyxDQUNBLElBQUlFLEVBR0ZBLEVBREV4RyxFQUFFcUcsT0FBT0wsU0FBU3RGLE9BQVMsRUFDZlYsRUFBRXFHLE9BQU9MLFNBQVMsR0FBRzlDLFlBR3JCbEQsRUFBRXFHLE9BQU9FLGNBQWNQLFNBQVMsR0FBRzlDLFlBR25ELElBQUlKLEVBQVVILEVBQVNnQyxFQUFpQjZCLEdBQ3BDQyxFQUFTcEcsU0FBU3dFLGNBQWMsVUFDaEM2QixFQUFjQyxNQUFNQyxLQUFLSCxFQUFPVCxVQUNoQ2EsRUFBYzlELEVBQWdCRCxHQUNsQzRELEVBQVloRCxTQUFTbkMsSUFDbkJBLEVBQUs0RCxRQUFRLElBRWZzQixFQUFPakQsVUFBVXFELEVBQ25CLEtBSVksV0FDWixJQUFJQyxFRTlIUyxXQUNiLElBQUluRCxFQUFNdEQsU0FBUzRDLGNBQWMsT0FDakNVLEVBQUlSLFVBQVVDLElBQUksY0FFbEIsSUFBSTJELEVBQWMxRyxTQUFTNEMsY0FBYyxPQUNyQytELEVBQVczRyxTQUFTNEMsY0FBYyxPQUN0QytELEVBQVM5RCxZQUFjLFlBQ3ZCLElBQUkrRCxFQUFnQjVHLFNBQVM0QyxjQUFjLFNBQzNDZ0UsRUFBY3ZCLGFBQWEsT0FBUSxRQUNuQ3FCLEVBQVl2RCxPQUFPd0QsRUFBVUMsR0FFN0IsSUFBSUMsRUFBYTdHLFNBQVM0QyxjQUFjLE9BQ3BDbEIsRUFBVTFCLFNBQVM0QyxjQUFjLE9BQ3JDbEIsRUFBUW1CLFlBQWMsV0FDdEIsSUFBSWlFLEVBQWU5RyxTQUFTNEMsY0FBYyxTQUMxQ2tFLEVBQWF6QixhQUFhLE9BQVEsUUFDbEN3QixFQUFXMUQsT0FBT3pCLEVBQVNvRixHQUUzQixJQUFJQyxFQUFjL0csU0FBUzRDLGNBQWMsT0FDckNqQixFQUFXM0IsU0FBUzRDLGNBQWMsT0FDdENqQixFQUFTa0IsWUFBYyxXQUN2QixJQUFJbUUsRUFBZ0JoSCxTQUFTNEMsY0FBYyxVQUN2Q3FFLEVBQU1qSCxTQUFTNEMsY0FBYyxVQUNqQ3FFLEVBQUlwRSxZQUFjLE1BQ2xCLElBQUlxRSxFQUFTbEgsU0FBUzRDLGNBQWMsVUFDcENzRSxFQUFPckUsWUFBYyxTQUNyQixJQUFJc0UsRUFBT25ILFNBQVM0QyxjQUFjLFVBQ2xDdUUsRUFBS3RFLFlBQWMsT0FDbkJtRSxFQUFjN0QsT0FBTzhELEVBQUtDLEVBQVFDLEdBQ2xDSixFQUFZNUQsT0FBT3hCLEVBQVVxRixHQUU3QixJQUFJSSxFQUFpQnBILFNBQVM0QyxjQUFjLE9BQ3hDaEIsRUFBYzVCLFNBQVM0QyxjQUFjLE9BQ3pDaEIsRUFBWWlCLFlBQWMsY0FDMUIsSUFBSXdFLEVBQW1CckgsU0FBUzRDLGNBQWMsU0FDOUN5RSxFQUFpQmhDLGFBQWEsT0FBUSxZQUN0QytCLEVBQWVqRSxPQUFPdkIsRUFBYXlGLEdBRW5DLElBQUlDLEVBQWF0SCxTQUFTNEMsY0FBYyxPQUNwQ0csRUFBTS9DLFNBQVM0QyxjQUFjLFVBQ2pDRyxFQUFJRCxVQUFVQyxJQUFJLGNBQ2xCQSxFQUFJRixZQUFjLE1BQ2xCLElBQUkwRSxFQUFTdkgsU0FBUzRDLGNBQWMsVUFNcEMsT0FMQTJFLEVBQU96RSxVQUFVQyxJQUFJLGlCQUNyQndFLEVBQU8xRSxZQUFjLFNBQ3JCeUUsRUFBV25FLE9BQU9KLEVBQUt3RSxHQUV2QmpFLEVBQUlILE9BQU91RCxFQUFhRyxFQUFZRSxFQUFhSyxFQUFnQkUsR0FDMURoRSxDQUNULENGNkVpQmtFLEdBQ1h2RyxFQUFRd0YsRUFBU2QsU0FBUyxHQUFHQSxTQUFTLEdBQ3RDakUsRUFBVStFLEVBQVNkLFNBQVMsR0FBR0EsU0FBUyxHQUN4Q2hFLEVBQVc4RSxFQUFTZCxTQUFTLEdBQUdBLFNBQVMsR0FDekMvRCxFQUFjNkUsRUFBU2QsU0FBUyxHQUFHQSxTQUFTLEdBR2hEM0YsU0FBU2lGLGlCQUFpQixTQUFVdEYsSUFFRyxlQUFuQ0EsRUFBRXFHLE9BQU9DLGFBQWEsVUFDMkIsZUFBakR0RyxFQUFFcUcsT0FBT0UsY0FBY0QsYUFBYSxXQUVwQ2pHLFNBQVN5SCxLQUFLdEUsT0FBT3NELEdBQ1B6RyxTQUFTd0UsY0FBYyxlQUM3QnNCLE1BQU00QixXQUFhLFNBQzdCLElBR0YxSCxTQUFTaUYsaUJBQWlCLFNBQVV0RixJQUNLLGtCQUFuQ0EsRUFBRXFHLE9BQU9DLGFBQWEsV0FDeEJRLEVBQVMzQixTQUNLOUUsU0FBU3dFLGNBQWMsZUFDN0JzQixNQUFNNEIsV0FBYSxVQUM3QixJQUlGMUgsU0FBU2lGLGlCQUFpQixTQUFVdEYsSUFDbEMsR0FBdUMsZUFBbkNBLEVBQUVxRyxPQUFPQyxhQUFhLFNBQTJCLENBQ25ELElBQ0lFLEVBRGdCbkcsU0FBU3dFLGNBQWMsVUFDWG1CLFNBQVMsR0FBRzlDLFlBRXhDckIsRUFEY2MsRUFBU2dDLEVBQWlCNkIsR0FDcEI1RSxZQUd4QixHQUFvQixLQUFoQk4sRUFBTTJFLE1BQ1IzRSxFQUFNNkUsTUFBTUMsT0FBUyxtQkFDckI5RSxFQUFNb0UsYUFBYSxjQUFlLCtCQUc3QixHQUFJN0QsRUFBTW1HLFNBQVMxRyxFQUFNMkUsT0FDOUIzRSxFQUFNNkUsTUFBTUMsT0FBUyxtQkFDckI5RSxFQUFNMkUsTUFBUSxHQUNkM0UsRUFBTW9FLGFBQWEsY0FBZSx1QkFHN0IsR0FBc0IsS0FBbEIzRCxFQUFRa0UsTUFDakJsRSxFQUFRb0UsTUFBTUMsT0FBUyx1QkFDbEIsQ0FDTCxJQUFJNkIsRUFBZ0I1SCxTQUFTd0UsY0FBYyxVQUN2QzJCLEVBQWN5QixFQUFjakMsU0FBUyxHQUFHOUMsWUFDeENnRixFQUFjdkYsRUFBU2dDLEVBQWlCNkIsR0FDNUMwQixFQUFZaEgsUUFDVixJQUFJWSxFQUNGUixFQUFNMkUsTUFDTmxFLEVBQVFrRSxNQUNSakUsRUFBU2lFLE1BQ1RoRSxFQUFZZ0UsUUFHaEIzQixFQUFxQkssR0FDSGdDLE1BQU1DLEtBQUtxQixFQUFjakMsVUFDL0J0QyxTQUFTeUUsSUFDbkJBLEVBQU1oRCxRQUFRLElBRWhCLElBQUkwQixFQUFjOUQsRUFBZ0JtRixHQUNsQ0QsRUFBY3pFLFVBQVVxRCxHQUN4QkMsRUFBUzNCLFFBQ1gsQ0FDRixJQUVILENBeEVhLEdBNEVaOUUsU0FBU2lGLGlCQUFpQixTQUFVdEYsSUFDbEMsR0FBdUMsa0JBQW5DQSxFQUFFcUcsT0FBT0MsYUFBYSxTQUE4QixDQUN0RHRHLEVBQUVxRyxPQUFPRSxjQUFjcEQsVUFBVUMsSUFBSSxTQUNyQyxJQUFJZ0YsRUFDRnBJLEVBQUVxRyxPQUFPRSxjQUFjUCxTQUFTLEdBQUdBLFNBQVMsR0FBRzlDLFlBQzdDbUYsRUFDRnJJLEVBQUVxRyxPQUFPRSxjQUFjQSxjQUFjUCxTQUFTLEdBQUc5QyxZQUNyQ1AsRUFBU2dDLEVBQWlCMEQsR0FDaEMzRyxhQUFhMEcsR0FDckI5RCxFQUFxQkssRUFDdkIsS0FJRnRFLFNBQVNpRixpQkFBaUIsU0FBVXRGLElBQ2xDLEdBQXVDLGVBQW5DQSxFQUFFcUcsT0FBT0MsYUFBYSxTQUEyQixDQUNuRCxJQUFJOEIsRUFDRnBJLEVBQUVxRyxPQUFPRSxjQUFjUCxTQUFTLEdBQUdBLFNBQVMsR0FBRzlDLFlBQzdDbUYsRUFDRnJJLEVBQUVxRyxPQUFPRSxjQUFjQSxjQUFjUCxTQUFTLEdBQUc5QyxZQUNyQ1AsRUFBU2dDLEVBQWlCMEQsR0FDaENoSCxXQUFXK0csR0FDbkI5RCxFQUFxQkssR0FDckIzRSxFQUFFcUcsT0FBT0UsY0FBY3BCLFFBQ3pCLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3Qvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdG9kby1saXN0L3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vdG9kby1saXN0L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9wcm9qZWN0LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9Ub2RvLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9mZXRjaExpYnJhcnlBcnJheS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvcHJvamVjdHNVSS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvc3RvcmFnZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3NpZGVCYXJVSS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvdG9kb0lucHV0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdClcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyY1xuXHRpZiAoIXNjcmlwdFVybCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0aWYoc2NyaXB0cy5sZW5ndGgpIHNjcmlwdFVybCA9IHNjcmlwdHNbc2NyaXB0cy5sZW5ndGggLSAxXS5zcmNcblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmw7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvamVjdCB7XG4gIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMudG9kbyA9IFtdO1xuICB9XG5cbiAgYWRkVG9kbyhuZXdUb2RvKSB7XG4gICAgdGhpcy50b2RvLnB1c2gobmV3VG9kbyk7XG4gIH1cblxuICBkZWxldGVUb2RvKHRpdGxlKSB7XG4gICAgZm9yIChsZXQgZWxlbSBvZiB0aGlzLnRvZG8pIHtcbiAgICAgIGlmIChlbGVtLnRpdGxlID09PSB0aXRsZSkge1xuICAgICAgICB0aGlzLnRvZG8uc3BsaWNlKHRoaXMudG9kby5pbmRleE9mKGVsZW0pLCAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgY29tcGxldGVUb2RvKG5hbWUpIHtcbiAgICBmb3IgKGxldCBlbGVtIG9mIHRoaXMudG9kbykge1xuICAgICAgaWYgKGVsZW0udGl0bGUgPT09IG5hbWUpIHtcbiAgICAgICAgZWxlbS5jb21wbGV0ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICB0b2RvTmFtZXMoKSB7XG4gICAgbGV0IG5hbWVzID0gW107XG4gICAgZm9yIChsZXQgZWxlbSBvZiB0aGlzLnRvZG8pIHtcbiAgICAgIG5hbWVzLnB1c2goZWxlbS50aXRsZSk7XG4gICAgfVxuICAgIHJldHVybiBuYW1lcztcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9kbyB7XG4gIGNvbnN0cnVjdG9yKHRpdGxlLCBkdWVEYXRlLCBwcmlvcml0eSwgZGlzY3JpcHRpb24gPSAnJywgaXNDb21wbGV0ZSA9IGZhbHNlKSB7XG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgIHRoaXMuZGlzY3JpcHRpb24gPSBkaXNjcmlwdGlvbjtcbiAgICB0aGlzLmlzQ29tcGxldGUgPSBpc0NvbXBsZXRlO1xuICB9XG5cbiAgY2hhbmdlVGl0bGUobmV3VGl0bGUpIHtcbiAgICB0aGlzLnRpdGxlID0gbmV3VGl0bGU7XG4gIH1cblxuICBjaGFuZ2VEYXRlKGRhdGUpIHtcbiAgICB0aGlzLmR1ZURhdGUgPSBkYXRlO1xuICB9XG5cbiAgY2hhbmdlUHJpb2lyaXR5KG5ld1ByaW9yaXR5KSB7XG4gICAgdGhpcy5wcmlvcml0eSA9IG5ld1ByaW9yaXR5O1xuICB9XG5cbiAgY2hhbmdlRGlzY3JpcHRpb24obmV3RGlzY3JpcHRpb24pIHtcbiAgICB0aGlzLmRpc2NyaXB0aW9uID0gbmV3RGlzY3JpcHRpb247XG4gIH1cblxuICBjb21wbGV0ZSgpIHtcbiAgICB0aGlzLmlzQ29tcGxldGUgPSB0cnVlO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBmZXRjaEFycihhcnIsIG5hbWUpIHtcbiAgcmV0dXJuIGFyci5maW5kKChwcm9qZWN0KSA9PiB7XG4gICAgcmV0dXJuIHByb2plY3QubmFtZSA9PT0gbmFtZTtcbiAgfSk7XG59XG4iLCJpbXBvcnQgcGx1c0ljb24gZnJvbSAnLi9pbWdzL3BsdXMuc3ZnJztcblxuLy8gZnVuY3Rpb24gdGhhdCB3aWxsIHRha2UgYSBwcm9qZWN0IG9iamVjdCBhbmQgY3JlYXRlIGl0cyBjb250ZW50XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0VUkocHJvamVjdCkge1xuICBsZXQgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDEnKTtcbiAgaGVhZGVyLnRleHRDb250ZW50ID0gcHJvamVjdC5uYW1lO1xuXG4gIC8vdGhpcyBmdW5jdGlvbiB3aWxsIGNyZWF0ZSB0aGUgY29udGVudHMgb2YgYSB0b2RvIGlmIHRoZSBwcm9qZWN0IGhhcyB0b2Rvc1xuICBmdW5jdGlvbiB0b2Rvc1VJKCkge1xuICAgIGxldCB0b2RvcyA9IFtdO1xuICAgIGlmIChwcm9qZWN0LnRvZG8ubGVuZ3RoID4gMCkge1xuICAgICAgcHJvamVjdC50b2RvLmZvckVhY2goKGVsZW0pID0+IHtcbiAgICAgICAgbGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZCgnc2luZ2xlLXRvZG8nKTtcbiAgICAgICAgaWYgKGVsZW0uaXNDb21wbGV0ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdncmVlbicpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgZGVsZXRlQnRuLnRleHRDb250ZW50ID0gJ1gnO1xuICAgICAgICBkZWxldGVCdG4uY2xhc3NMaXN0LmFkZCgndG9kb0RlbGV0ZScpO1xuICAgICAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgbGV0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgbmFtZS50ZXh0Q29udGVudCA9ICdUaXRsZTonO1xuICAgICAgICBsZXQgcmVhbE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgcmVhbE5hbWUudGV4dENvbnRlbnQgPSBlbGVtLnRpdGxlO1xuICAgICAgICB0aXRsZS5hcHBlbmQobmFtZSwgcmVhbE5hbWUpO1xuICAgICAgICB0aXRsZS5jbGFzc0xpc3QuYWRkKCd0b2RvVGl0bGUnKTsgLy9jbGFzcyBmb3IgdGl0bGVcbiAgICAgICAgbGV0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgbGV0IGRhdGVOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRhdGVOYW1lLnRleHRDb250ZW50ID0gJ0R1ZSBEYXRlOic7XG4gICAgICAgIGxldCByZWFsRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICByZWFsRGF0ZS50ZXh0Q29udGVudCA9IGVsZW0uZHVlRGF0ZTtcbiAgICAgICAgZGF0ZS5hcHBlbmQoZGF0ZU5hbWUsIHJlYWxEYXRlKTtcbiAgICAgICAgZGF0ZS5jbGFzc0xpc3QuYWRkKCd0b2RvRGF0ZScpOyAvLyBjbGFzcyBmb3IgZGF0ZVxuICAgICAgICBsZXQgcHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgbGV0IHByaW9yaXR5TmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBwcmlvcml0eU5hbWUudGV4dENvbnRlbnQgPSAnUHJpb3JpdHk6JztcbiAgICAgICAgbGV0IHJlYWxQcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICByZWFsUHJpb3JpdHkudGV4dENvbnRlbnQgPSBlbGVtLnByaW9yaXR5O1xuICAgICAgICBwcmlvcml0eS5hcHBlbmQocHJpb3JpdHlOYW1lLCByZWFsUHJpb3JpdHkpO1xuICAgICAgICBwcmlvcml0eS5jbGFzc0xpc3QuYWRkKCd0b2RvUHJpb3JpdHknKTtcbiAgICAgICAgbGV0IGNvbXBsZXRlZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBjb21wbGV0ZWQudGV4dENvbnRlbnQgPSAnY29tcGxldGVkJztcbiAgICAgICAgY29tcGxldGVkLmNsYXNzTGlzdC5hZGQoJ3RvZG9Db21wbGV0ZWQnKTtcbiAgICAgICAgaWYgKGVsZW0uZGlzY3JpcHRpb24gIT09ICcnKSB7XG4gICAgICAgICAgbGV0IGRpc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgbGV0IGRpc2NyaXB0aW9uTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIGRpc2NyaXB0aW9uTmFtZS50ZXh0Q29udGVudCA9ICdEaXNjcmlwdGlvbjonO1xuICAgICAgICAgIGxldCByZWFsRGlzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICByZWFsRGlzY3JpcHRpb24udGV4dENvbnRlbnQgPSBlbGVtLmRpc2NyaXB0aW9uO1xuICAgICAgICAgIGRpc2NyaXB0aW9uLmFwcGVuZChkaXNjcmlwdGlvbk5hbWUsIHJlYWxEaXNjcmlwdGlvbik7XG4gICAgICAgICAgZGlzY3JpcHRpb24uY2xhc3NMaXN0LmFkZCgndG9kb0Rpc2NyaXB0aW9uJyk7XG4gICAgICAgICAgZGl2LmFwcGVuZChkZWxldGVCdG4sIHRpdGxlLCBkYXRlLCBwcmlvcml0eSwgZGlzY3JpcHRpb24sIGNvbXBsZXRlZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGl2LmFwcGVuZChkZWxldGVCdG4sIHRpdGxlLCBkYXRlLCBwcmlvcml0eSwgY29tcGxldGVkKTtcbiAgICAgICAgfVxuICAgICAgICB0b2Rvcy5wdXNoKGRpdik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRvZG9zO1xuICB9XG5cbiAgbGV0IG5ld1RvZG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgbmV3VG9kby5jbGFzc0xpc3QuYWRkKCdhZGROZXdUb2RvJyk7XG4gIGxldCBpY29uID0gbmV3IEltYWdlKCk7XG4gIGljb24uc3JjID0gcGx1c0ljb247XG4gIGxldCBkaXZUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRpdlRleHQudGV4dENvbnRlbnQgPSAnQWRkIGEgdG9kbyc7XG4gIG5ld1RvZG8uYXBwZW5kKGljb24sIGRpdlRleHQpO1xuXG4gIHJldHVybiBbaGVhZGVyLCAuLi50b2Rvc1VJKCksIG5ld1RvZG9dO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcG9wdWxhdGVMb2NhbFN0b3JhZ2UoYXJyKSB7XG4gIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3Rlc3RTdG9yYWdlJywgSlNPTi5zdHJpbmdpZnkoYXJyKSk7XG59XG4iLCJpbXBvcnQgUHJvamVjdCBmcm9tICcuL3Byb2plY3QnO1xuaW1wb3J0IFRvZG8gZnJvbSAnLi9Ub2RvJztcbmltcG9ydCB7IHJlcGxhY2VBZGRQcm9qIH0gZnJvbSAnLi9zaWRlQmFyVUknO1xuaW1wb3J0IHByb2plY3RJY29uIGZyb20gJy4vaW1ncy9uZXdQcm9qSWNvbi5zdmcnO1xuaW1wb3J0IGZldGNoQXJyIGZyb20gJy4vZmV0Y2hMaWJyYXJ5QXJyYXknO1xuaW1wb3J0IGNyZWF0ZVByb2plY3RVSSBmcm9tICcuL3Byb2plY3RzVUknO1xuaW1wb3J0IGNyZWF0ZVRvZG9Gb3JtIGZyb20gJy4vdG9kb0lucHV0JztcbmltcG9ydCBwb3B1bGF0ZUxvY2FsU3RvcmFnZSBmcm9tICcuL3N0b3JhZ2UnO1xuXG4vLyB0aGUgYXJyYXkgdGhhdCB3aWxsIHN0b3JlIGFsbCBwcm9qZWN0c1xuY29uc3QgcHJvamVjdHNMaWJyYXJ5ID0gW107XG5sZXQgcHJvamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdHMnKTtcblxuaWYgKHNlc3Npb25TdG9yYWdlLmxlbmd0aCA+IDEpIHtcbiAgbGV0IHN0b3JhZ2VBcnIgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Rlc3RTdG9yYWdlJykpO1xuICBmb3IgKGxldCBlbGVtIG9mIHN0b3JhZ2VBcnIpIHtcbiAgICBwcm9qZWN0c0xpYnJhcnkucHVzaChuZXcgUHJvamVjdChlbGVtLm5hbWUpKTtcbiAgfVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvamVjdHNMaWJyYXJ5Lmxlbmd0aDsgaSsrKSB7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBzdG9yYWdlQXJyW2ldLnRvZG8ubGVuZ3RoOyBqKyspIHtcbiAgICAgIHByb2plY3RzTGlicmFyeVtpXS5hZGRUb2RvKFxuICAgICAgICBuZXcgVG9kbyhcbiAgICAgICAgICBzdG9yYWdlQXJyW2ldLnRvZG9bal0udGl0bGUsXG4gICAgICAgICAgc3RvcmFnZUFycltpXS50b2RvW2pdLmR1ZURhdGUsXG4gICAgICAgICAgc3RvcmFnZUFycltpXS50b2RvW2pdLnByaW9yaXR5LFxuICAgICAgICAgIHN0b3JhZ2VBcnJbaV0udG9kb1tqXS5kaXNjcmlwdGlvbixcbiAgICAgICAgICBzdG9yYWdlQXJyW2ldLnRvZG9bal0uaXNDb21wbGV0ZVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGxldCBkaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmV3UHJvaicpO1xuICBkaXYucmVtb3ZlKCk7XG4gIHByb2plY3RzTGlicmFyeS5mb3JFYWNoKChwcm9qKSA9PiB7XG4gICAgbGV0IG5ld1Byb2ogPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBuZXdQcm9qLmNsYXNzTGlzdC5hZGQoJ25ldy1wcm9qZWN0Jyk7XG4gICAgbGV0IGljb24gPSBuZXcgSW1hZ2UoKTtcbiAgICBpY29uLnNyYyA9IHByb2plY3RJY29uO1xuICAgIGxldCBkaXZUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGl2VGV4dC50ZXh0Q29udGVudCA9IHByb2oubmFtZTtcbiAgICBuZXdQcm9qLmFwcGVuZChpY29uLCBkaXZUZXh0KTtcbiAgICBwcm9qZWN0cy5hcHBlbmQobmV3UHJvaik7XG4gIH0pO1xuICBwcm9qZWN0cy5hcHBlbmQoZGl2KTtcbn1cblxuLyogIHRoZSBzaWRlVUkgTW9kdWxlIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgaW5wdXQgdGhhdCB3aWxsIGFwcGVhciBvbiB0aGUgXG5zaWRlQmFyLCBpdCB3aWxsIGNyZWF0ZSBhIG5ldyBwcm9qZWN0IGFuZCBhcHBlbmQgaXQgdG8gdGhlIHByb2plY3RzIGRpdlxuICovXG5jb25zdCBzaWRlVUkgPSAoZnVuY3Rpb24gKCkge1xuICAvL2V2ZW50IGxpc3RlbmVyIGZvciB0aGUgYWRkIG5ldyBwcm9qZWN0IGJ1dHRvblxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmV3UHJvaicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGxldCBuZXdGb3JtID0gcmVwbGFjZUFkZFByb2ooKTtcbiAgICBsZXQgaW5wdXREaXYgPSBuZXdGb3JtWzFdLmNoaWxkcmVuO1xuXG4gICAgLyogZXZlbnQgbGlzdGVuZXIgZm9yIHRoZSBhZGQgYnV0dG9uIFxuICAgICAgIGl0IHdpbGwgY3JlYXRlIGEgbmV3IGRpdiBmb3IgdGhlIHByb2plY3QgdGhhdCBoYXMgYW4gaWNvblxuICAgICAgIGFuZCB0aGUgcHJvamVjdCBuYW1lLiBpdCB3aWxsIGNyZWF0ZSBhIG5ldyBQcm9qZWN0IGFuZCBwdXNoIGl0IFxuICAgICAgIHRvIHRoZSBwcm9qZWN0c0xpYnJhcnkgYXJyYXkuIGl0IGFsc28gY2hlY2tzIHRoZSBwcm9qZWN0IG5hbWUgaXNcbiAgICAgICBub3QgZW1wdHlcbiAgICAqL1xuICAgIGlucHV0RGl2WzFdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBpbnB1dERpdlswXS52YWx1ZSAhPT0gJycgJiZcbiAgICAgICAgZmV0Y2hBcnIocHJvamVjdHNMaWJyYXJ5LCBpbnB1dERpdlswXS52YWx1ZSkgPT09IHVuZGVmaW5lZFxuICAgICAgKSB7XG4gICAgICAgIGxldCBuZXdQcm9qID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIG5ld1Byb2ouY2xhc3NMaXN0LmFkZCgnbmV3LXByb2plY3QnKTtcbiAgICAgICAgbGV0IGljb24gPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaWNvbi5zcmMgPSBwcm9qZWN0SWNvbjtcbiAgICAgICAgbGV0IGRpdlRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZGl2VGV4dC50ZXh0Q29udGVudCA9IGlucHV0RGl2WzBdLnZhbHVlO1xuICAgICAgICBuZXdQcm9qLmFwcGVuZChpY29uLCBkaXZUZXh0KTtcbiAgICAgICAgcHJvamVjdHMuYXBwZW5kKG5ld1Byb2osIG5ld0Zvcm1bMF0pO1xuICAgICAgICBuZXdGb3JtWzFdLnJlbW92ZSgpO1xuICAgICAgICBwcm9qZWN0c0xpYnJhcnkucHVzaChuZXcgUHJvamVjdChpbnB1dERpdlswXS52YWx1ZSkpO1xuICAgICAgICBwb3B1bGF0ZUxvY2FsU3RvcmFnZShwcm9qZWN0c0xpYnJhcnkpO1xuICAgICAgfSBlbHNlIGlmIChmZXRjaEFycihwcm9qZWN0c0xpYnJhcnksIGlucHV0RGl2WzBdLnZhbHVlKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlucHV0RGl2WzBdLnN0eWxlLmJvcmRlciA9ICdzb2xpZCAwLjI1dmggcmVkJztcbiAgICAgICAgaW5wdXREaXZbMF0udmFsdWUgPSAnJztcbiAgICAgICAgaW5wdXREaXZbMF0uc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsICdEdXBsaWNhdGUgcHJvamVjdCBuYW1lJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnB1dERpdlswXS5zdHlsZS5ib3JkZXIgPSAnc29saWQgMC4yNXZoIHJlZCc7XG4gICAgICAgIGlucHV0RGl2WzBdLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCAncHJvamVjdCBtdXN0IGhhdmUgYSBuYW1lJyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgLyogZXZlbnQgbGlzdGVuZXIgZm9yIHRoZSBjYW5jZWwgYnV0dG9uIHRoYXQgd2lsbCByZW1vdmUgdGhlIGlucHV0IGRpdiBhbmQgXG4gICAgICAgcmVjcmVhdGUgdGhlIGFkZCBuZXcgcHJvamVjdCBidXR0b25cbiAgICAqL1xuICAgIGlucHV0RGl2WzJdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgcHJvamVjdHMuYXBwZW5kKG5ld0Zvcm1bMF0pO1xuICAgICAgbmV3Rm9ybVsxXS5yZW1vdmUoKTtcbiAgICB9KTtcbiAgfSk7XG59KSgpO1xuXG4vL2V2ZW50IGxpc3RlbmVyIGZvciBkeW5hbWljYWxseSBhZGRlZCBwcm9qZWN0c1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAvLyBldmVudCBkZWxlZ2F0aW9uIGNoZWNrIGlmIHRhcmdldCBvciB0YXJnZXQgcGFyZW50IGhhcyB0aGUgY2xhc3MgbmV3LXByb2plY3RcbiAgaWYgKFxuICAgIGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnY2xhc3MnKSA9PT0gJ25ldy1wcm9qZWN0JyB8fFxuICAgIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpID09PSAnbmV3LXByb2plY3QnXG4gICkge1xuICAgIGxldCBwcm9qZWN0TmFtZTtcbiAgICAvLyBpZiB0YXJnZXQgd2FzIHRoZSBwYXJlbnQgY29udGFpbmVyIGl0cyBjaGlsZHJlbiBsZW5ndGggPiAwXG4gICAgaWYgKGUudGFyZ2V0LmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgIHByb2plY3ROYW1lID0gZS50YXJnZXQuY2hpbGRyZW5bMV0udGV4dENvbnRlbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHRoZSBjYXNlIGlmIHRoZSBjaGlsZCB3YXMgY2xpY2tlZFxuICAgICAgcHJvamVjdE5hbWUgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuWzFdLnRleHRDb250ZW50O1xuICAgIH1cblxuICAgIGxldCBwcm9qZWN0ID0gZmV0Y2hBcnIocHJvamVjdHNMaWJyYXJ5LCBwcm9qZWN0TmFtZSk7XG4gICAgbGV0IHBhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvcycpO1xuICAgIGxldCBPbGRjaGlsZHJlbiA9IEFycmF5LmZyb20ocGFyZW50LmNoaWxkcmVuKTtcbiAgICBsZXQgbmV3Q2hpbGRyZW4gPSBjcmVhdGVQcm9qZWN0VUkocHJvamVjdCk7XG4gICAgT2xkY2hpbGRyZW4uZm9yRWFjaCgoZWxlbSkgPT4ge1xuICAgICAgZWxlbS5yZW1vdmUoKTtcbiAgICB9KTtcbiAgICBwYXJlbnQuYXBwZW5kKC4uLm5ld0NoaWxkcmVuKTtcbiAgfVxufSk7XG5cbi8vIG1vZHVsZSByZXNwb25zaWJsZSBmb3IgdGhlIGFkZCB0b2RvXG5jb25zdCB0b2RvcyA9IChmdW5jdGlvbiAoKSB7XG4gIGxldCB0b2RvRm9ybSA9IGNyZWF0ZVRvZG9Gb3JtKCk7XG4gIGxldCB0aXRsZSA9IHRvZG9Gb3JtLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzFdO1xuICBsZXQgZHVlRGF0ZSA9IHRvZG9Gb3JtLmNoaWxkcmVuWzFdLmNoaWxkcmVuWzFdO1xuICBsZXQgcHJpb3JpdHkgPSB0b2RvRm9ybS5jaGlsZHJlblsyXS5jaGlsZHJlblsxXTtcbiAgbGV0IGRpc2NyaXB0aW9uID0gdG9kb0Zvcm0uY2hpbGRyZW5bM10uY2hpbGRyZW5bMV07XG5cbiAgLy9ldmVudCBsaXN0aW5lciB0byBwb3AgdXAgYSBmb3JtIHdoZW4gdGhlIGFkZCB0b2RvIGJ1dHRvbiBpcyBjbGlja2VkXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBpZiAoXG4gICAgICBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgPT09ICdhZGROZXdUb2RvJyB8fFxuICAgICAgZS50YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgPT09ICdhZGROZXdUb2RvJ1xuICAgICkge1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQodG9kb0Zvcm0pO1xuICAgICAgbGV0IHRvZG9CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkTmV3VG9kbycpO1xuICAgICAgdG9kb0J0bi5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgfVxuICB9KTtcbiAgLy9ldmVudCBsaXN0ZW5lciBmb3IgdGhlIGNhbmNlbCBidXR0b25cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgPT09ICdjYW5jZWxUb2RvQnRuJykge1xuICAgICAgdG9kb0Zvcm0ucmVtb3ZlKCk7XG4gICAgICBsZXQgdG9kb0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGROZXdUb2RvJyk7XG4gICAgICB0b2RvQnRuLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgfVxuICB9KTtcblxuICAvL2V2ZW50IGxpc3RlbmVyIGZvciB0aGUgYWRkIGJ1dHRvblxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgaWYgKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnY2xhc3MnKSA9PT0gJ2FkZFRvZG9CdG4nKSB7XG4gICAgICBsZXQgcHJvamVjdFBhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvcycpO1xuICAgICAgbGV0IHByb2plY3ROYW1lID0gcHJvamVjdFBhcmVudC5jaGlsZHJlblswXS50ZXh0Q29udGVudDtcbiAgICAgIGxldCBjdXJyZW50UHJvaiA9IGZldGNoQXJyKHByb2plY3RzTGlicmFyeSwgcHJvamVjdE5hbWUpO1xuICAgICAgbGV0IG5hbWVzID0gY3VycmVudFByb2oudG9kb05hbWVzKCk7IC8vIG5hbWVzIG9mIGV4aXN0aW5nIHRvZG9zXG5cbiAgICAgIC8vIGNoZWNrIGlmIHRoZSB0aXRsZSBpcyBlbXB0eVxuICAgICAgaWYgKHRpdGxlLnZhbHVlID09PSAnJykge1xuICAgICAgICB0aXRsZS5zdHlsZS5ib3JkZXIgPSAnc29saWQgMC4yNXZoIHJlZCc7XG4gICAgICAgIHRpdGxlLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCAndGhpcyBpbnB1dCBpcyByZXF1aXJlZCcpO1xuXG4gICAgICAgIC8vIGNoZWNrIGlmIHRoZSB0aXRsZSBpcyBkdXBsaWNhdGVkXG4gICAgICB9IGVsc2UgaWYgKG5hbWVzLmluY2x1ZGVzKHRpdGxlLnZhbHVlKSkge1xuICAgICAgICB0aXRsZS5zdHlsZS5ib3JkZXIgPSAnc29saWQgMC4yNXZoIHJlZCc7XG4gICAgICAgIHRpdGxlLnZhbHVlID0gJyc7XG4gICAgICAgIHRpdGxlLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCAnRHVwbGljYXRlIE5hbWUnKTtcblxuICAgICAgICAvLyBjaGVjayBpZiBkYXRlIGlzIGVtcHR5XG4gICAgICB9IGVsc2UgaWYgKGR1ZURhdGUudmFsdWUgPT09ICcnKSB7XG4gICAgICAgIGR1ZURhdGUuc3R5bGUuYm9yZGVyID0gJ3NvbGlkIDAuMjV2aCByZWQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHByb2plY3RQYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kb3MnKTtcbiAgICAgICAgbGV0IHByb2plY3ROYW1lID0gcHJvamVjdFBhcmVudC5jaGlsZHJlblswXS50ZXh0Q29udGVudDtcbiAgICAgICAgbGV0IGN1cnJlbnRQcm9qID0gZmV0Y2hBcnIocHJvamVjdHNMaWJyYXJ5LCBwcm9qZWN0TmFtZSk7XG4gICAgICAgIGN1cnJlbnRQcm9qLmFkZFRvZG8oXG4gICAgICAgICAgbmV3IFRvZG8oXG4gICAgICAgICAgICB0aXRsZS52YWx1ZSxcbiAgICAgICAgICAgIGR1ZURhdGUudmFsdWUsXG4gICAgICAgICAgICBwcmlvcml0eS52YWx1ZSxcbiAgICAgICAgICAgIGRpc2NyaXB0aW9uLnZhbHVlXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgICBwb3B1bGF0ZUxvY2FsU3RvcmFnZShwcm9qZWN0c0xpYnJhcnkpO1xuICAgICAgICBsZXQgT2xkY2hpbGRyZW4gPSBBcnJheS5mcm9tKHByb2plY3RQYXJlbnQuY2hpbGRyZW4pO1xuICAgICAgICBPbGRjaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICAgIGNoaWxkLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IG5ld0NoaWxkcmVuID0gY3JlYXRlUHJvamVjdFVJKGN1cnJlbnRQcm9qKTtcbiAgICAgICAgcHJvamVjdFBhcmVudC5hcHBlbmQoLi4ubmV3Q2hpbGRyZW4pO1xuICAgICAgICB0b2RvRm9ybS5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufSkoKTtcblxuY29uc3QgdG9kb0Z1bmN0aW9uYWxpdHkgPSAoZnVuY3Rpb24gKCkge1xuICAvL2V2ZW50IGZvciBjb21wbGV0ZSBidXRvblxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgaWYgKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnY2xhc3MnKSA9PT0gJ3RvZG9Db21wbGV0ZWQnKSB7XG4gICAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2dyZWVuJyk7XG4gICAgICBsZXQgdG9kb1RpdGxlID1cbiAgICAgICAgZS50YXJnZXQucGFyZW50RWxlbWVudC5jaGlsZHJlblsxXS5jaGlsZHJlblsxXS50ZXh0Q29udGVudDtcbiAgICAgIGxldCBwcm9qZWN0VGl0bGUgPVxuICAgICAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2hpbGRyZW5bMF0udGV4dENvbnRlbnQ7XG4gICAgICBsZXQgcHJvamVjdCA9IGZldGNoQXJyKHByb2plY3RzTGlicmFyeSwgcHJvamVjdFRpdGxlKTtcbiAgICAgIHByb2plY3QuY29tcGxldGVUb2RvKHRvZG9UaXRsZSk7XG4gICAgICBwb3B1bGF0ZUxvY2FsU3RvcmFnZShwcm9qZWN0c0xpYnJhcnkpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy9ldmVudCBmb3IgZGVsZXRlIGJ1dHRvblxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgaWYgKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnY2xhc3MnKSA9PT0gJ3RvZG9EZWxldGUnKSB7XG4gICAgICBsZXQgdG9kb1RpdGxlID1cbiAgICAgICAgZS50YXJnZXQucGFyZW50RWxlbWVudC5jaGlsZHJlblsxXS5jaGlsZHJlblsxXS50ZXh0Q29udGVudDtcbiAgICAgIGxldCBwcm9qZWN0VGl0bGUgPVxuICAgICAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2hpbGRyZW5bMF0udGV4dENvbnRlbnQ7XG4gICAgICBsZXQgcHJvamVjdCA9IGZldGNoQXJyKHByb2plY3RzTGlicmFyeSwgcHJvamVjdFRpdGxlKTtcbiAgICAgIHByb2plY3QuZGVsZXRlVG9kbyh0b2RvVGl0bGUpO1xuICAgICAgcG9wdWxhdGVMb2NhbFN0b3JhZ2UocHJvamVjdHNMaWJyYXJ5KTtcbiAgICAgIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgfVxuICB9KTtcbn0pKCk7XG4iLCIvKiAgdGhpcyBtb2R1bGUgd2lsbCBpbmNsdWRlIDMgZnVuY3Rpb25zXG4xLSBjcmVhdGVOZXdQcm9qIHdpbGwgY3JlYXRlIHRoZSBkaXYgdGhhdCB0YWtlIGlucHV0IGZvciBuZXcgcHJvamVjdFxuIGFuZCByZXR1cm4gaXRcbjItIHJlcGxhY2VBZGRQcm9qIHdpbGwgcmVwbGFjZSB0aGUgYWRkUHJvaiB3aXRoIHRoZSBuZXcgZm9ybVxuIGFuZCByZXR1cm5zIHRoZSBhZGRQcm9qIGFuZCB0aGUgZGl2XG4qL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU5ld1Byb2pGb3JtKCkge1xuICBsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRpdi5jbGFzc0xpc3QuYWRkKCd0ZW1wRm9ybScpO1xuICBsZXQgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpO1xuICBsZXQgYnV0dG9uMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICBidXR0b24xLnRleHRDb250ZW50ID0gJ0FkZCc7XG4gIGxldCBidXR0b24yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gIGJ1dHRvbjIudGV4dENvbnRlbnQgPSAnQ2FuY2VsJztcbiAgZGl2LmFwcGVuZChpbnB1dCwgYnV0dG9uMSwgYnV0dG9uMik7XG4gIHJldHVybiBkaXY7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlQWRkUHJvaigpIHtcbiAgbGV0IGFkZFByb2ogPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmV3UHJvaicpO1xuICBsZXQgcHJvamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdHMnKTtcbiAgYWRkUHJvai5yZW1vdmUoKTtcbiAgbGV0IG5ld0Zvcm0gPSBjcmVhdGVOZXdQcm9qRm9ybSgpO1xuICBwcm9qZWN0cy5hcHBlbmQobmV3Rm9ybSk7XG4gIHJldHVybiBbYWRkUHJvaiwgbmV3Rm9ybV07XG59XG4iLCIvLyB0aGlzIG1vZHVsZSB3aWxsIGNyZWF0ZSB0aGUgZm9ybSB0byBhZGQgdG9kb1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlVG9kb0Zvcm0oKSB7XG4gIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZGl2LmNsYXNzTGlzdC5hZGQoJ3RvZG8taW5wdXQnKTtcblxuICBsZXQgdGFza05hbWVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgbGV0IHRhc2tOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHRhc2tOYW1lLnRleHRDb250ZW50ID0gJ1Rhc2sgTmFtZSc7XG4gIGxldCB0YXNrTmFtZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgdGFza05hbWVJbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpO1xuICB0YXNrTmFtZURpdi5hcHBlbmQodGFza05hbWUsIHRhc2tOYW1lSW5wdXQpO1xuXG4gIGxldCBkdWVEYXRlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGxldCBkdWVEYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGR1ZURhdGUudGV4dENvbnRlbnQgPSAnRHVlIERhdGUnO1xuICBsZXQgZHVlRGF0ZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgZHVlRGF0ZUlucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsICdkYXRlJyk7XG4gIGR1ZURhdGVEaXYuYXBwZW5kKGR1ZURhdGUsIGR1ZURhdGVJbnB1dCk7XG5cbiAgbGV0IHByaW9yaXR5RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGxldCBwcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBwcmlvcml0eS50ZXh0Q29udGVudCA9ICdQcmlvcml0eSc7XG4gIGxldCBwcmlvcml0eUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VsZWN0Jyk7XG4gIGxldCBsb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgbG93LnRleHRDb250ZW50ID0gJ0xvdyc7XG4gIGxldCBtZWRpdW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgbWVkaXVtLnRleHRDb250ZW50ID0gJ01lZGl1bSc7XG4gIGxldCBoaWdoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gIGhpZ2gudGV4dENvbnRlbnQgPSAnSGlnaCc7XG4gIHByaW9yaXR5SW5wdXQuYXBwZW5kKGxvdywgbWVkaXVtLCBoaWdoKTtcbiAgcHJpb3JpdHlEaXYuYXBwZW5kKHByaW9yaXR5LCBwcmlvcml0eUlucHV0KTtcblxuICBsZXQgZGlzY3JpcHRpb25EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgbGV0IGRpc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRpc2NyaXB0aW9uLnRleHRDb250ZW50ID0gJ0Rpc2NyaXB0aW9uJztcbiAgbGV0IGRpc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICBkaXNjcmlwdGlvbklucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0QXJlYScpO1xuICBkaXNjcmlwdGlvbkRpdi5hcHBlbmQoZGlzY3JpcHRpb24sIGRpc2NyaXB0aW9uSW5wdXQpO1xuXG4gIGxldCBidXR0b25zRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGxldCBhZGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgYWRkLmNsYXNzTGlzdC5hZGQoJ2FkZFRvZG9CdG4nKTtcbiAgYWRkLnRleHRDb250ZW50ID0gJ0FkZCc7XG4gIGxldCBjYW5jZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgY2FuY2VsLmNsYXNzTGlzdC5hZGQoJ2NhbmNlbFRvZG9CdG4nKTtcbiAgY2FuY2VsLnRleHRDb250ZW50ID0gJ0NhbmNlbCc7XG4gIGJ1dHRvbnNEaXYuYXBwZW5kKGFkZCwgY2FuY2VsKTtcblxuICBkaXYuYXBwZW5kKHRhc2tOYW1lRGl2LCBkdWVEYXRlRGl2LCBwcmlvcml0eURpdiwgZGlzY3JpcHRpb25EaXYsIGJ1dHRvbnNEaXYpO1xuICByZXR1cm4gZGl2O1xufVxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJnIiwiZ2xvYmFsVGhpcyIsInRoaXMiLCJGdW5jdGlvbiIsImUiLCJ3aW5kb3ciLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwibG9jYXRpb24iLCJkb2N1bWVudCIsImN1cnJlbnRTY3JpcHQiLCJzcmMiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJsZW5ndGgiLCJFcnJvciIsInJlcGxhY2UiLCJwIiwiUHJvamVjdCIsImNvbnN0cnVjdG9yIiwibmFtZSIsInRvZG8iLCJhZGRUb2RvIiwibmV3VG9kbyIsInB1c2giLCJkZWxldGVUb2RvIiwidGl0bGUiLCJlbGVtIiwic3BsaWNlIiwiaW5kZXhPZiIsImNvbXBsZXRlVG9kbyIsImNvbXBsZXRlIiwidG9kb05hbWVzIiwibmFtZXMiLCJUb2RvIiwiZHVlRGF0ZSIsInByaW9yaXR5IiwiZGlzY3JpcHRpb24iLCJpc0NvbXBsZXRlIiwiY2hhbmdlVGl0bGUiLCJuZXdUaXRsZSIsImNoYW5nZURhdGUiLCJkYXRlIiwiY2hhbmdlUHJpb2lyaXR5IiwibmV3UHJpb3JpdHkiLCJjaGFuZ2VEaXNjcmlwdGlvbiIsIm5ld0Rpc2NyaXB0aW9uIiwiZmV0Y2hBcnIiLCJhcnIiLCJmaW5kIiwicHJvamVjdCIsImNyZWF0ZVByb2plY3RVSSIsImhlYWRlciIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsImFkZCIsImljb24iLCJJbWFnZSIsImRpdlRleHQiLCJhcHBlbmQiLCJ0b2RvcyIsImZvckVhY2giLCJkaXYiLCJkZWxldGVCdG4iLCJyZWFsTmFtZSIsImRhdGVOYW1lIiwicmVhbERhdGUiLCJwcmlvcml0eU5hbWUiLCJyZWFsUHJpb3JpdHkiLCJjb21wbGV0ZWQiLCJkaXNjcmlwdGlvbk5hbWUiLCJyZWFsRGlzY3JpcHRpb24iLCJ0b2Rvc1VJIiwicG9wdWxhdGVMb2NhbFN0b3JhZ2UiLCJzZXNzaW9uU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwicHJvamVjdHNMaWJyYXJ5IiwicHJvamVjdHMiLCJxdWVyeVNlbGVjdG9yIiwic3RvcmFnZUFyciIsInBhcnNlIiwiZ2V0SXRlbSIsImkiLCJqIiwicmVtb3ZlIiwicHJvaiIsIm5ld1Byb2oiLCJhZGRFdmVudExpc3RlbmVyIiwibmV3Rm9ybSIsImFkZFByb2oiLCJpbnB1dCIsInNldEF0dHJpYnV0ZSIsImJ1dHRvbjEiLCJidXR0b24yIiwiY3JlYXRlTmV3UHJvakZvcm0iLCJyZXBsYWNlQWRkUHJvaiIsImlucHV0RGl2IiwiY2hpbGRyZW4iLCJ2YWx1ZSIsInVuZGVmaW5lZCIsInN0eWxlIiwiYm9yZGVyIiwidGFyZ2V0IiwiZ2V0QXR0cmlidXRlIiwicGFyZW50RWxlbWVudCIsInByb2plY3ROYW1lIiwicGFyZW50IiwiT2xkY2hpbGRyZW4iLCJBcnJheSIsImZyb20iLCJuZXdDaGlsZHJlbiIsInRvZG9Gb3JtIiwidGFza05hbWVEaXYiLCJ0YXNrTmFtZSIsInRhc2tOYW1lSW5wdXQiLCJkdWVEYXRlRGl2IiwiZHVlRGF0ZUlucHV0IiwicHJpb3JpdHlEaXYiLCJwcmlvcml0eUlucHV0IiwibG93IiwibWVkaXVtIiwiaGlnaCIsImRpc2NyaXB0aW9uRGl2IiwiZGlzY3JpcHRpb25JbnB1dCIsImJ1dHRvbnNEaXYiLCJjYW5jZWwiLCJjcmVhdGVUb2RvRm9ybSIsImJvZHkiLCJ2aXNpYmlsaXR5IiwiaW5jbHVkZXMiLCJwcm9qZWN0UGFyZW50IiwiY3VycmVudFByb2oiLCJjaGlsZCIsInRvZG9UaXRsZSIsInByb2plY3RUaXRsZSJdLCJzb3VyY2VSb290IjoiIn0=